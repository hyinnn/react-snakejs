{"version":3,"sources":["apple.png","index.js","Queue.src.js"],"names":["module","exports","QueueSrc","require","INTERVAL","UP","DOWN","RIGHT","LEFT","Snake","color","this","body","Queue","direction","initializeSnake","enqueue","e","keyCode","board","head","peekLast","peekFirst","next","Square","val","props","imgStyle","height","SCALE","width","style","src","appleImg","squareStyle","className","React","Component","Board","rows","Array","fill","singleRow","map","COLS","i","j","rowStyle","boardStyle","ROWS","Game","state","snake","gameIsOver","generateFood","r","Math","floor","random","c","getQueue","nextMove","tail","isGameOver","setState","hasEatenFood","dequeue","changeDirection","getOffset","length","id","tabIndex","onKeyDown","changeSnakeDirection","updateBoard","setInterval","ReactDOM","render","document","getElementById","focus","queue","offset","getLength","isEmpty","item","push","slice","undefined"],"mappings":"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","file":"static/js/main.75ab9df1.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJcAAACXCAMAAAAvQTlLAAAAVFBMVEX///9mZmZgYGBjY2NdXV38/Pzn5+daWlrx8fHf39+rq6v19fVubm5paWm0tLScnJy8vLyWlpbOzs58fHyjo6OMjIxzc3PHx8fY2NiDg4NVVVVPT09ssxvzAAAFDklEQVR4nO2ci3LjKgyGjQBj4/v9su//ngenaTaJSVtkVLxn8s/O7HQmnXwVspAEchS99dY/rCSt9ZL3MjTHo2bd5UKBqM7EldXjCpwZwZm4pkVcoM7FlQ7qk4oxoUPjfKrNgbHTccle8DsspurQRBdlvWAPWtvQSJuy4QmL/clCMxnJ6hmLraGZootvPWPBEBrKqN5hMTiB20+ww+JjHJoqike+N1f4aC+HvbnYnzk0ls25GC9CU0Vxvl9FxqfQWNE+RBisIXhQTfdUJqamobGs5hJVaKooscWIJQmNFU17c3ERPqRG+/2a8RPsQNl+GVUZGspo3mFBeJ+PLLFeVMEj1yYtzmgt4/YPWzaHOngWcZFs7rlgPEWpET1yQVGFD6dX3bg4wJCeYw03yUYBgBLFok8Q4+/UNkZ6Sk8RHL6VzJJNWUa5sjJua611pcv2J2sl46mshm7szL+h0fVMYcokLQdQSolN5j/WfLlkSVo3zHwY+FUgzE9L6XmZk3op1GOtA5uLv0hGW90VAizpmCqGyR9Z2q/KUlGY9EoxPT+FqmSuuBK2j1/RoPQT3LKysCTINzTW3VstLjv++tPXX+k8bAay5eq771l53yYyyuJpWV9b6u431uFwjNP8J18k+NjoYRSWctsqMR4rwuPlG2P9RQPxk7/g9vH1SL4Rdz81gLsOdJ9mRodlKl6NtJitaeRTgOtcxDmltTatKDBbL8uvMJ1Ek09RY5lw0TlvShOtb10Eytn1U5dghMVCRP2G3rmUds8sbI1Sz1gFYvPOOupVBIbJKTT1s4g7a7B1/vxiCVQ6UVJ7F0clhuTepXoMlu3syatgwSUSDfUy4nLVmJhK4FaRfBmRvXNJvAVhT0DIgxeyEtr3u70Kfb5W0+5B6LMGy3GKVy7suR9tsOcFsjjLKKkO3PEgjqpo92qJoxf2FL4mjvbYPk5Jy5VjH0dNzIVtyL25/h9c/Um5zmovYi50/CLmQvYuybnQ+yNxvIcGyUW8P3KGzL+I8wkmkBtkSlwNYe+8J9QtpgVZDxW0XAyQh48LdTcH+UTabi96FbJSI65r0Q0K4j4Aw3qY9TKxXy5UvzBbyA2G6q/KivwIBpftUFeQRpwjnknqnWgTYKI+dcNwk+jcL8MQd8A+BO59Q+pU5wpWuPpYXPzCQhrnzx3jK3Wn/Aa2Nm5VG/l52qegcyqPYuoc7CauutbB/+mvdNwE4HBXwTISQQfmcK8pIc8p/oq7+D550nqTW+OcPjn8lGOD+rc8nzvuk/QXTj7kWubS3zi5ynWTfB4joZF7MUl+bPvB5Z5Q/8YmCYN7ZfQbBkN1NekNhiskE/JHUuBaO9QxDONdmyRxy4lje/m0uyT2nk5Em1bwET9OQRkrxJEZ15aMC+v0V1GtJC+OTXhkI80zeWgVN800WM3hebWSoA/Mcw+jTRQptY8p19j7Pulp3jy1TMAdkcCeQT7Lb8fV4zsWfPo+R18J2Ev6uwLMc5+vh5GVJ4tx9EWFF2C7l1Q9fBuHy3wrGH05sMKZ77fDyP6lxQTkg67nJMuSudbNyK3DpZsAff3rKzDbyOU2XthM8V3Pz8CVnbIOHYqO5OUw8/i0lsYwY28N3Vld5fAUXTijelFTrNdbiOVcqFy/nuOW8TRcxqRvf0PR0s2Wx2VXKOPeindN/W0ckpMeRnaZ+i6WifZdBsZ7+qExXv6zrzHeNtV1/a+8NuCtt97a6z9QYUzlCJrDIQAAAABJRU5ErkJggg==\"","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport appleImg from './apple.png'\n\n\n// Global Variables\nconst SCALE = 30;\nconst ROWS = 16; \nconst COLS = 16;\nconst QueueSrc = require('./Queue.src')\nconst FOOD = 'F';\nconst SNAKE = 'S';\nlet INTERVAL = 250;\n\n// Directions\nconst UP = [-1, 0];\nconst DOWN = [1, 0];\nconst RIGHT = [0, 1];\nconst LEFT = [0, -1];\n\n\nclass Snake {\n    constructor(color = \"black\") {\n        this.color = color;\n\n        // Body is an array of coordinates [row, col]\n        // Tail of the snake is the first element of the array\n        // Head of the snake is the last element of the array\n        this.body = new QueueSrc.Queue();\n        this.direction = [0, 0];\n\n        this.initializeSnake();\n    }\n\n    initializeSnake() {\n        this.body.enqueue([5, 5]); // Starting position [5,5]\n    }\n\n    changeDirection(e) {\n        if (e.keyCode === 37 && this.direction !== RIGHT) {\n            this.direction = LEFT;\n        }\n        else if (e.keyCode === 38 && this.direction !== DOWN) {\n            this.direction = UP;\n        }\n        else if (e.keyCode === 39 && this.direction !== LEFT) {\n            this.direction = RIGHT;\n        }\n        else if (e.keyCode === 40 && this.direction !== UP) {\n            this.direction = DOWN;\n        }\n    }\n\n\n    // Update the body of the snake by removing the tail and adding it to head\n    nextMove(board) {\n        const head = this.body.peekLast();\n        const tail = this.body.peekFirst();\n        const next = [head[0] + this.direction[0], head[1] + this.direction[1]];\n\n        return [tail, next];\n    }\n\n\n    hasEatenFood(next, board) {\n        return board[next[0]][next[1]] === FOOD;\n    }\n}\n\n\nclass Square extends React.Component {\n    render() {\n        let val = this.props.val;\n\n        // If the square is a food\n        if (val === FOOD) {\n            const imgStyle = {\n                height: SCALE - 1, // Minus one so the img doesn't cover the border lines\n                width: SCALE - 1,\n            }\n            val = <img style={imgStyle} src={appleImg} />;\n        }\n\n        // Else the square is a snake or a blank\n        const backColor = val === SNAKE ? 'black' : 'white';\n        const squareStyle = {\n            height: SCALE,\n            width: SCALE,\n            'background-color': backColor,\n        };\n\n        return (\n            <div style={squareStyle} className='square'>{val}</div>\n        );\n    }\n}\n\nclass Board extends React.Component {\n    render() {\n        // Build the HTML board\n        const board = this.props.board;\n        let rows = Array(ROWS).fill(null);\n        let singleRow = Array(ROWS).fill().map(() => Array(COLS + 1).fill(null));\n\n        for (let i = 0; i < ROWS; i++) {\n            for (let j = 0; j < COLS; j++) {\n                singleRow[i][j] = <Square val={board[i][j]} />\n            }\n        }\n\n        // CSS styling for a row in the board\n        const rowStyle = {\n            height: SCALE,\n            width: COLS * SCALE,\n        }\n\n        for (let i = 0; i < ROWS; i++) {\n            rows[i] = <div style={rowStyle} className='row'>{singleRow[i]}</div>\n        }\n\n        // CSS styling for the board\n        const boardStyle = {\n            height: ROWS * SCALE + 1,\n            width: COLS * SCALE + 1,\n        };\n\n        return (\n            <div className='boardContainer'>\n                <div style={boardStyle} className='board'>\n                    {rows}\n                </div>\n            </div>\n        );\n    }\n}\n\n\nclass Game extends React.Component {\n    // Keep track of game logic and the state of the board\n    // Leave the rendering to board and square class\n    constructor(props) {\n        super(props);\n        this.state = {\n            snake: new Snake(),\n            board: Array(ROWS).fill().map(() => Array(COLS).fill(null)),\n            gameIsOver: false,\n        };\n\n        // Draw the initial snake on the board\n        const head = this.state.snake.body.peekFirst();\n        this.state.board[head[0]][head[1]] = SNAKE;\n\n        // Generate food\n        this.generateFood();\n    }\n\n    // Generate a piece of food on a random position on the board\n    generateFood() {\n        const board = this.state.board;\n        let r = Math.floor(Math.random() * ROWS);\n        let c = Math.floor(Math.random() * COLS);\n\n        while (board[r][c] != null) {\n            r = Math.floor(Math.random() * ROWS);\n            c = Math.floor(Math.random() * COLS);\n        }\n\n        board[r][c] = FOOD;\n    }\n\n    hasEatenFood(next, board) {\n        return board[next[0]][next[1]] === FOOD;\n    }\n\n    // Update the position of the snake and food in the board\n    updateBoard() {\n        const snake = this.state.snake;\n        const body = snake.body.getQueue(); // JS Array\n        const board = this.state.board; // 2d Array\n        \n        // Move the snake and update its position on the board\n        var [tail, next] = snake.nextMove();\n        snake.body.enqueue(next);\n\n        // Check if next move is over\n        if (this.isGameOver(next, board)) {\n            this.setState({\n                gameIsOver: true,\n            });\n            return;\n        }\n\n        // Grow the snake if it ate food\n        if (!this.hasEatenFood(next, board)) {\n            snake.body.dequeue();\n        }\n        else {\n            this.generateFood();\n        }\n\n        // Update the snake on the board\n        board[tail[0]][tail[1]] = null;\n        board[next[0]][next[1]] = SNAKE;\n    }\n\n    changeSnakeDirection(e) {\n        this.state.snake.changeDirection(e);\n    }\n\n    // Check game is over if snake collided with itself or the walls\n    isGameOver(head, board) {\n        const snake = this.state.snake;\n        const body = snake.body.getQueue();\n\n        if (head[0] < 0 || head[0] >= ROWS) {\n            return true;\n        }\n        if (head[1] < 0 || head[1] >= COLS) {\n            return true;\n        }\n\n        for (let i = snake.body.getOffset() + 1; i < body.length - 1; i++) {\n            if (body[i][0] === head[0] && body[i][1] === head[1]) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    toggleSpeed(e) {\n        if (INTERVAL === 250) {\n            INTERVAL = 50;\n        }\n        else {\n            INTERVAL = 250;\n        }\n    }\n\n    render() {\n        if (this.state.gameIsOver) {\n            return (\n                <div id='gameid' className='game' tabIndex='0' onKeyDown={(e) => this.changeSnakeDirection(e)}>\n                    <div className='gameover'>Sorry, game over! Refresh page to play again</div>\n                </div>\n            );\n        }\n\n        this.updateBoard();\n        return (\n            <div id='gameid' className='game' tabIndex='0' \n                        onKeyDown={(e) => this.changeSnakeDirection(e)}>\n                <Board board={this.state.board}/>\n            </div>\n        );\n    }\n}\n\nfunction renderGame() {\n  ReactDOM.render(<Game />, document.getElementById('root'));\n  document.getElementById(\"gameid\").focus();\n}\n\n//renderGame();\nsetInterval(renderGame, INTERVAL); \n\n\n\n\n\n","/*\n\nQueue.js\n\nA function to represent a queue\n\nCreated by Kate Morley - http://code.iamkate.com/ - and released under the terms\nof the CC0 1.0 Universal legal code:\n\nhttp://creativecommons.org/publicdomain/zero/1.0/legalcode\n\n*/\n\n/* Creates a new queue. A queue is a first-in-first-out (FIFO) data structure -\n * items are added to the end of the queue and removed from the front.\n */\nfunction Queue(){\n\n  // initialise the queue and offset\n  var queue  = [];\n  var offset = 0;\n\n  // Returns the length of the queue.\n  this.getLength = function(){\n    return (queue.length - offset);\n  }\n\n  // Returns true if the queue is empty, and false otherwise.\n  this.isEmpty = function(){\n    return (queue.length == 0);\n  }\n\n  /* Enqueues the specified item. The parameter is:\n   *\n   * item - the item to enqueue\n   */\n  this.enqueue = function(item){\n    queue.push(item);\n  }\n\n  /* Dequeues an item and returns it. If the queue is empty, the value\n   * 'undefined' is returned.\n   */\n  this.dequeue = function(){\n\n    // if the queue is empty, return immediately\n    if (queue.length == 0) return undefined;\n\n    // store the item at the front of the queue\n    var item = queue[offset];\n\n    // increment the offset and remove the free space if necessary\n    if (++ offset * 2 >= queue.length){\n      queue  = queue.slice(offset);\n      offset = 0;\n    }\n\n    // return the dequeued item\n    return item;\n\n  }\n\n  /* Returns the item at the front of the queue (without dequeuing it). If the\n   * queue is empty then undefined is returned.\n   */\n  this.peekFirst = function(){\n    return (queue.length > 0 ? queue[offset] : undefined);\n  }\n\n  /* Returns the item at the end of the queue (without dequeuing it). If the\n   * queue is empty then undefined is returned.\n   */\n  this.peekLast = function(){\n    return (queue.length > 0 ? queue[queue.length - 1] : undefined);\n  }\n\n\n  /*\n   * (My edit) Return the queue for iteration\n   */\n  this.getQueue = function() {\n    return queue;\n  }\n\n  /*\n   * (My edit) Return the offset of the queue\n   */\n   this.getOffset = function() {\n    return offset;\n   }\n\n\n}\n\n\n// Edit for Node import/export\nmodule.exports.Queue = Queue;"],"sourceRoot":""}